<?php

function relationship_nodes_search_search_api_elasticsearch_client_data_type_info_alter(array &$types) {
  $types['relationship_nodes_search_nested_relationship'] = [
    'label' => t('Nested relationship object'),
    'mapping' => [
      'type' => 'nested',
      'properties' => [],
    ],
  ];
}

function relationship_nodes_search_search_api_field_type_mapping_alter(array &$mapping) {
  $mapping['entity_reference'] = 'relationship_nodes_search_nested_relationship';
}